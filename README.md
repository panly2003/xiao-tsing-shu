# 小清书
《移动应用软件开发》课程大作业

开发者：张昱 刘思睿 潘乐怡

## 项目简介

小清书是模仿小红书的 ui 设计的一款校园论坛 APP，主要面向清华大学在校生。用户可以在平台上发布自己的生活记录、心得体会等内容。用户还可以对他人的动态进行点赞、评论和收藏，关注他人并私信交流等。

## 关键功能设计以及实现技术 

### 信息发布

1. 使用 markwon 开源库实现 markdown 文本解析，可以支持绝大部分的 markdown 标记。 
2. 获取地址考虑到并非所有设备都支持 Google Play 服务，使用 android 原生的 Location 的 API 获取经纬度信息，再使用 Bing map 的反向地理编码 API 服务，查询经纬度对应地址。 
3. 使用 DialogX 开源库，美化选择信息类型的对话框。 
4. 添加视频时，使用 MediaMetadataRetriever 获取视频时长一半的位置的一帧作为视频的封面。

### 信息查看与操作 

1. 使用 github 开源库 banner 实现详情页面的轮播图，能够浏览多个图片和视频。 
2. 视频使用 ExoPlayer 以实现流媒体的播放，可以边看边下载，而无需下载完成后再播放。 
3. 使用 DialogX 开源库，美化切换排序的按钮，并在切换时显示动画。 
4. 模仿小红书 UI，使用 StaggeredGridLayoutManager+RecycleView 实现瀑布流布局

### 通知 

1. 采用轮询的方式，每 5s 调一次后端的获取系统通知列表的接口 
2. 每次调用获取后，后端将已获取的这些系统通知从数据库中删除，避免重复获取 
3. 前端采用 Android 自带的 NotificationManager 和 NotificationCompat 库来实现系统通知的显示

### 私信

1. 使用chatkit开源库实现聊天列表、聊天记录的显示，以及信息的发送

2. 前端采用轮询的方式，每5s调一次后端的判断是否有新消息的接口，如果有，则再调chat-get接口获取聊天消息，同时页面闪烁并移到最底端

## 亮点功能

1.  ui美观，模仿小红书，信息浏览页面实现瀑布流布局
2.  支持纯文字、静态图、gif、视频以及轮播图的发布和查看

## 分工情况

| 组员   | 分工                                                         |
| ------ | ------------------------------------------------------------ |
| 张昱   | 完成所有后端接口的开发   & 注册登录、个人主页前后端通信      |
| 刘思睿 | 完成信息发布、信息查看与操作、搜索、个人主页展示发布的信息等功能的前端开发（含前后端通信） |
| 潘乐怡 | 完成注册登录、个人主页前端开发 &   他人主页、关注粉丝黑名单列表、私信与通知的前端开发（含前后端通信） |
